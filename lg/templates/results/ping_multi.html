{% if results.errors %}
  <div class="row m-4">
    <div class="col">
      <p class="font-monospace text-danger">
        {% for error in results.errors %}
          {{error}}<br/>
        {% endfor %}
      </p>
    </div>
  </div>
{% endif %}

{% if results.devices %}
  <div class="row mt-4">
    <div class="col">
      <div class="card">
        <h5 class="card-header">Results</h5>
        <div class="card-body">
          {% if results.raw_output %}

            <table class="table table-hover table-sm">
              <thead>
                <tr>
                  <th scope="col">Location</th>
                  <th scope="col">Output</th>
                </tr>
              </thead>
              <tbody>
                {% for location_name, output in results.devices.items() %}
                  <tr>
                    <th scope="row">{{location_name}}</th>
                    <td>
                      <pre><code>{{output}}</code></pre>
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>

          {% else %}

            <table class="table table-hover table-sm">
              <thead>
                <tr>
                  <th scope="col">Location</th>
                  <th scope="col">Destination</th>
                  <th scope="col">Packet Loss</th>
                  <th scope="col">Minimum RTT</th>
                  <th scope="col">Average RTT</th>
                  <th scope="col">Maximum RTT</th>
                  <th scope="col">Packet Count</th>
                  <th scope="col">Packet Size</th>
                </tr>
              </thead>
              <tbody>
                {% for location_name, output in results
                  .devices
                  .items() %}
                  {% for destination, ping in output.items() %}
                    <tr>
                      <th scope="row">{{location_name}}</th>
                      <td>{{destination}}</td>
                      <td>{{ping.packet_loss}}%</td>
                      <td>{{ping.rtt_min|default('-')}}</td>
                      <td>{{ping.rtt_avg|default('-')}}</td>
                      <td>{{ping.rtt_max|default('-')}}</td>
                      <td>{{ping.packet_count}}</td>
                      <td>{{ping.packet_size}}</td>
                    </tr>
                  {% endfor %}
                {% endfor %}
              </tbody>
            </table>

          {% endif %}
        </div>
      </div>
    </div>
  </div>

{% endif %}
